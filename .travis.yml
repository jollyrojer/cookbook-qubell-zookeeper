language: ruby
gemfile:
- Gemfile
rvm:
- 1.9.3
before_install:
- echo -n $EC2_KEY_CHUNK_{0..32} >> ~/.ssh/id_ec2.base64
- cat ~/.ssh/id_ec2.base64 | tr -d ' ' | base64 --decode > ~/.ssh/id_ec2.pem
env:
  global:
  - secure: RdwnLkHHnOqkqMsm3tT6SV1nJmt3NI2152UDcrZiTo7N95oJJpiOAUkPjhidJ9MSWPBFvlkT2Eahz98XDUf8sriNeRENQGlGJavA9o2z+MHrBGUHhdZBS7DL6GN1zpYuUNztwqZzaStQ2NvjGw/Hh0ftpYIiLSkWqGtzYa61OBc=
  - secure: AJqqJ9/MXLJjmqpFSsYoi2NnVrI9lUnFEl6HiBUh+HpbbztZLTum/YtFVTuH/PP2EJuHSzROsHWbTx2jrm8jjn69CFnO3TCwtC1451J+t0FrBxmJMfh3wSN0OGdio9852VIt7zJ939xESpdoJQNWe8842/5ggqVkvo8/WGRZVDk=
  - secure: XjcAzZjOsc28b69m+NpniilwTJ0DKOivXNFAjlzp6xkEbUTJWpuab2ZPXpxXlqN4EjibS56yNVRDzFDqE0O9zMqUk847Oj8sVR4PJFJrxcoe0jpWr7YUZkxOtaRCPW3cm9gr9cHMzwcJQtZhhopfogD+6chsjUZRfhAXlJRR/J4=
  - secure: EFmWr00l2XFaInFJv2h4MDe6tifvMvuxUo1N2T47rVAKZcx/6FMByicBLlGUSxtKQPy9llZVfgBD8mv4EaRf3W8OEBi0zmSlZTJBuyxIAOKNJkavym77nXZ9Y1a2JMLW7w0S35eladS+qM3+yjyR3ZxmKA8fgYv+9TTUwvucaJk=
  - secure: NSaEzAp/ItQe5j/TcKfM3+VBDGaZiYdkCYlsDolh3NV8fXCNXvDamFlbnhDCckF8fg+crXfNSgcWTIZ35T5BL6kJFwStbK8avpOZultNUyUp8N92HAU5jnsWBkiveGgHJvj6ShksyaJzHQXqomnUyIuKG5e9E4ZS5xf0o8yedhw=
  - secure: GZY4CrpHGKGvYjgl88xTRiZWCeZdl5SrboUyUxnkrj3Wm4RLh/VLR7/Iqqqz287i7if/R+rseHWwCEKOWDBh2J5m8BfDY/V9qv2X2gCyZyA+Nda++iZ9jhbHKvuyLI1mEBSiq9iBAyj22RHLJw+LFDeIGHaSXQJ29hUXOKv9nXw=
  - secure: P2LjUfg9wae2KXrzLbD1dLCUMMSbZ9YCj51RPKzKq0MhIkPyLW/UE6IJ0D7nlDKISFJ3sofuRaj+RL7F2E1nUD9dcyeGuCfP4cHR6ojXFTIoybfsk48vTvs/+e1BsnnvX3nd8iFl1U+7VeaYdhTJNCtu0AbuJL0IoJyng1nvfeo=
  - secure: YkNrY9O5wq45sP0NFrGYlM8syQ6MFVbgS/X15AWFbxItdDKqsKQ9Rjvh4g9u3l8n8T0J2G0R8HxQ5T/X5R7QLM62HRPblMFU7txgLXmZpkfNC3+v9YY9ZWKk9YyvadkkImUy02/7nVa/RtQuOW/ezgDdoAkrmTPYrTmcLcwIewc=
  - secure: XOUzMwXJcOhcvyN+ZvEb0ERtDQeOWMGJQt/4nCyFCKx2fiUlddq4G7NJDWNw27iApP9Ibd4HlnLH4iY7/eMdqjQvKamPMsqtWODh7eHTJCK2LkTVFPtDNTeEQmHXmiZqZ0Cy0bA+xJpYouONA4uCYTTdwH7aExTShrEs+4k0dQ8=
  - secure: PO2MTCwS4p6WOij8dksJ8fwVW9irKp+5LEM3OFQutvky+rCP3zqfphUCOp3AuE4pg4ZemehPWbR7ykGZgaQSWsqLEf2HZk3LyDwAZcPr7HJcoCAu/BZFgaSst7cMg4HXxSfULYyyzdT+vJkMr2TKq5g5TNR/02Kw9jbN2Xrt06I=
  - secure: GkNCHBoMGpjdviwuHL53KazP0LANi+0Ae/z0qxdvjznKTn9z/r7xzliDGcMxUmqi7mUjMLxHXu27FHe+UwDBfD44ZwwiAwD4/3MbUWrvwVuS7cYfCy7dKHeFniJajdo0nIN9PBJad71qkQI1n5j4yKQ0ZOG9siFczKad9PD8gU0=
  - secure: AmEtHjeugT+X2scXjjI8+T2Sau+vA6/LRiZhUuDYMX5YiioQ8DP940dFHleXwWbyH6Vuhnu9bL4rh+rAIhW97ZoQevfNrO+/zl/VhKSL/KUbEGS/RRG0W+2qGKjK3w+lelT+AnL1YZrRL4iRJrpu9lnkEMDMY6CLVMU0MD5XgbM=
  - secure: E2Bfrkkff5TXT0BmHvE+hpSGssF5etA5/12qHcaX1Fq3+9UeS4uMAJSITt1mab6TuDKpT0AEyFFKgGyLg4vmooyQfU+QvZRr143fn8SyK8bt2SoRfBnlVyBfLKqbdkukcBo5CYhIiI8sP0e+Wl3rz62eBxvQD6m4+NzVY8OViyg=
  - secure: ICZuIbi1ZU33Eja39Z9vTklZC9uLI8pE90mBYfpr9ZtowtKkfJ0ceRLrXKurAq+k8KNmVJJbmQyRVRxYiGPQGFawwcrlWQJG6HAIXkuNCDwffJM47Wrx+DXjAV6JD0SokwJgNCdKNG94N/F+2Z6CTdFSX2q7zG5CAJ5aAx+nZ8k=
  - secure: KiO/oweWyHhxEMUujEut68VmHQVrwfHqjE3X6Dv9KyQCvIZPlgP2fpQeO+IvX5DhKfyg7gweABPnMlO6OwLn7+tfmPtO9R7w1dbkaW+GXyaM1Nqg6IZj9EJfSIByN4o1lFAzcdlM+esvqjm5UWRKKgcFGgUD8aulzk2n36sjdvE=
  - secure: TuGvlw2raR0GKmUscGH/51JVOD0M/4FByqGBtEc9EN9ShubWGGYydhiyCLIbAVGxZqCRyrJy7spw4gkdifVEMYbOBHB9rqdJtj3vCcNV5B0i3gGLAahUKUNdfg41mvXlK5k28VUaTRB8Zg+Sh2kz6g5L8LK5R6zywYcyn/iKyyU=
  - secure: OGw2NFxMwHFLqTOp9Wms0CyfyTnl/cmDQgcfdF15LqWE0OFRwWKlKErLnplYqHX3r6KqtOGxZOan/HfvpRONOjxLM0LgNbfgCY4tKlow77TpcS4wWWtxZB45b+Pqh3MJDO2qgHjQbz188LeaQH4NaGj0MhS3smQz3A9qAkqCKjg=
  - secure: Sv6p5Pu4oPSETKMiPh1PvaYUsCEEQo4d9waMZqFQqXjAfcweqyVmO40x9fNJeSERNiiLa2N0bAvKFdo8UcpytCSpxYlboH/+z3xJKLR8BIxTR49YJP8UnqeUSMZ687jarOHem4fS7jjdmaYgPgpBNDHFQsYCLsoxCx+jo/ApTVs=
  - secure: Ez0sxydVfUEHEPyJMH24yG2NzEMgcUUKpgfitIuOg0nVfFuH48BmjNQbw4Hcm1MuBiGn72xGAim+PAlA86IaEW4mZpRD6AErVxtejY0PpBb03R8GFvSbPmUJ1H4XlKX1oadBhHID5ypDUpy+HXvd9cvN46XLhuxgLgPBpvIj2oM=
  - secure: PaJO797IB0HsN/WBpPRVsQedwOhoH12nvNWdBKF5lXmcLPVPkCy0KIlBcphDxrReCl632kHcpX7Wx+U51hxjmbg2zaxxyf2dxnga7OC3PJhJtEGu1snCgFp5QzwTKsQKdBGtlno0Xx/NZT70jH+JBBE4GNh+gAFQIf2yKYnKfi4=
  - secure: Cs4Bxp107LZT/RWec4/MXb8ibqyy1FDcHB4wNW7i3ucHXIZDhMg1ovYVnjHFLtTYyHAWGisyJqDeN2zrVPbIhHGooQMBcZrbYVQppaljP6JyBc1fdMv3SKH8Lj2P8IatnLOzTpe/n2xYg71UEBsQa7U+U3xAqYJZWvHsWi3gP58=
  - secure: Rpg+bpxrIrH+U71jG9lbsYJhI9mFB8fJguy/ZIycB3TebddhCh/uiPfRGSet9ZyTTk85YpPe0XynZs+wJqGSK70/SVOkEQ11XNZId/z84XyWy8kPa7BCSJi6R7VwrRkSLr1OYpMd2IprU+4dcIxYx0NZM0ePKDMals6XImqn/JY=
  - secure: ZcubZ5Q9/1mi78bJzupLcHABPG1CVgwX282vOBFQQbSva6dqgZkKwFSIY6ZmD5pvJzZJUQWZmCnWEhhbghQPdTLlTPuCGOEmYC8Cf7a/nm+u6vulez7V0dITjqNaki8rTzU7HR4VzOEo7ijxkb22Mtp9Cv0B7rKfc4ooRca4dI4=
  - secure: ff03vroUpKSJP9ge64jKvVZ4JuyPcHAB+i/NQeUkoRXLh3RJCaLNteZeCQ8YM+tKtZseXkaxcs5rRP78R7sMSiprot9Ey9xlSSM7Resqxmw8/JgwHgbvld+uAZae1zqWvIGlNAxeMBJjoj6j956RWu/fgAHz252//+XEWqY802U=
  - secure: NJJigBFHNqQu5JssIUjR98SRG+KZEGUlQNJA/d8hI0rYEVTgqNop9EQ66yUcXdnWEvJUqSyuNQNsYM9CxOv2gbuqRAAEt3MPac2J4zBbe7ZZfT3/ykahfeuN/OxzF/giHpYw5hV83QFMLv3Ml8HNDANMmwIFnkrag8DLf7IeMSU=
  - secure: Os5uGPGUTiEav92gy0mV+tmnP/v7wNcVQ5zX6ijTU48DwSzgOIlA/CpKtcsO8BOWyk7d9zLQKaSfGRTOfXG1fvSCaLkgCNQnO4/W9wV49NsIIBZqpiJYE90WMzY3MOZ+7NIUV5iLGx9x4rP0XVfjb7vs/tvXasDJ/iS43dHWaVk=
  - secure: XxTpa0OKNxmrrO51t2q7nNlerGV23xXkapfrwiLMxsbqyo3StFx8lZM9Hd/YE1ZcMcD4Ue75DaBIglnBELK1oRxAPNftmq0FKPy16UPURDnfis59SGOzJF+vxzsQIAQY6CykB0NbPcMKrft6xoXgD6ZUs9J9HW9h/vL6u3Ai0Vs=
  - secure: PqZiZPsUQU6ZivIM2qGRBi/C+DY3/9sCuR2kCfznj96KnHpK/TI3Abegfh+83LMmBD12LzFilr65EAWmn/EiEi93yeHttQiFK71qwFAOlPghaA3HBX7PkUgLl+ZM3VTdczFLrQTJCbh4+B+myJcYjILjgbmZ6G117er77cZ17v0=
  - secure: YXaM/wHhAWR099/X8ijt8FVRSHr0EzIQKjCDDMZsig65YKrm6BqYsatjdlPGdb//ps3LsN2pwFjWkJ6gP8Ig5czi6DTImLkpiTrZjFfgh4XW40C0HNEuHv0ASH6G3wOlpmohcjZaDhR2ZQelFqMK4BnMbFAZawGYbuZqKzR18Ck=
  - secure: hN4wp4BLwT8k2X536NBJQRBUjr8fgMkmK7+Z8e/2/pwFwBXPNqGme9ts7uZuJyeQEimyhYoPUN0b91HCNaf3stcBe3xPwC6iXwOtSej0EJbkvVic5aXnliz0XuG/JR7ZWdP4fDcRA+qUsY0tx314Eq0aCTztqHbL2crhoQidTAQ=
  - secure: erqJgQBfnnSxiSNy/HmvR+BPlXVCcShsswV/toHbGTSTisk9O/hk1JufGergR+12uQc5MAbdHMwnX97ZABudU6YWAso2tuoZK/mtXbRJUBk8jDx0OQJGB8P0fRVKRDaNjz4S8iRVqjGDc2Op7Ipo2MSphTyZYqKb4WzDJE23Hwg=
  - secure: PzhS+AcliduDt5h8TfnR9ysDSPaJVYnAfMSejNFVcCGUei89c+koc9sQn/0dlqLN6Cajt/K16CI0Oj3wmVDi0uwcZBhxwymRk4L75K4AztaDiUzJfJHPO5YbzkTjMiU7NvETJwwShGGpHLAznU1vYXmVCguLLSZ2cLdbaQm5c9o=
  - secure: InCrXDbRSfwBzBdTJWo3nDf17iTmNvPkmnZIkoglg6yJw+5Cu81OCxlJ/QwqMggAilFXvJ7+Gtt5uMuUvP/YkEmBafgpNAqEyDsRfujyAtGH4NQqNCMiSjfv9/ZJnNgoJ7AFBieSYLVXW6hPSbRAAcCkytpXcSdtZwcF43vPHZ8=
  - secure: KNuuucT+DBEnqzhXEuFBu2UEey+puG6qKrH6wD2DVYkI83qW95tyNcXC1HMqW6y1ff+8M22XppZ7TlHq9hD0D0xhz88cbpe/pvekGBQKdca3tpFz1IGcXlk5n4HWCTtlxY+BjUhofmTIYDaByR5ceQYkD0GPL56lRR9QNgmBxP8=
  - secure: FMd7QmROhoINsV8qaiS+VsAWusJ11hoooPVZctxE2eTknbOjDFDMHT2MRtpTMBn0FkiKKsPqjE3JEPkzhzbNaMazVFmHtsX10YKyHxNNeWjXhXmqyHdhaeNXXhZ1W1k3DXFs+7mWGCGLyKdWYZP5QPdKaje6zOKI3uM7CSKbAwE=
  - secure: YNT6WeIwNNAr36imFqABIMpUhUB0+d+7OHVWs1dmrd6reeQMrRGsYStEAWtFr6VW0xXtB58+lQcTkFa0iGZVF1L+o4DZH3uuiPHrwHYNxBVhrFQVovhxj7kSvByQaF8lCPjt0tQ5INkAZANKsb//hqZzssi/y18GXKSg/x4MEPY=
  - secure: J+kRB8u9XL2t8lkIQ3Mc7p5K9cL0H8Z8DAUX6I7mU2iUYh3xVJc+61++OZuqLFsqaB/UbCtD+vOrGt3rnRmSJiACgwNb/rVGC58gIJYT9512rsKkOm0Ubuzxn5W1kD4z6aeJhvKhn7jDhWQ+kgDUD5RqHrIro6dMo0hUHHI4nng=
  matrix:
  - KITCHEN_INSTANCE='default-ubuntu-1204'
  - KITCHEN_INSTANCE='default-ubuntu-1004'
  - KITCHEN_INSTANCE='default-centos-64'
script:
- bundle exec kitchen test $KITCHEN_INSTANCE -l debug
after_script:
- bundle exec kitchen destroy $KITCHEN_INSTANCE
notifications:
  email:
  - aivantsov@qubell.com
